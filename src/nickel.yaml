# The following patch(es) are ported from GeoffR's patch zips

Reduce top/bottom page spacer:
  - Enabled: no
  - Description: |
      Reduces the blank space that remains at the top/bottom of the page when
      the "Chapter progress" / "Book progress" reading settings options are set to Off.
      Spacer height is halved, customise by changing the min-height + max-height
      values in the Replace lines below. Affects both ePub and KePub books.
  - FindZlib: "MediumVertSpacer"
  - ReplaceZlibGroup:
      Replacements:
      # Touch/Mini: 24px --> 12px
      - Find:    "MediumVertSpacer[qApp_deviceIsTrilogy=true] {\n  min-height: 24px;\n  max-height: 24px;\n}"
        Replace: "MediumVertSpacer[qApp_deviceIsTrilogy=true] {\n  min-height: 12px;\n  max-height: 12px;\n}"
      # Glo/Aura/Aura2ed: 32px --> 16px
      - Find:    "MediumVertSpacer[qApp_deviceIsPhoenix=true] {\n  min-height: 32px;\n  max-height: 32px;\n}"
        Replace: "MediumVertSpacer[qApp_deviceIsPhoenix=true] {\n  min-height: 16px;\n  max-height: 16px;\n}"
      # AuraHD/H2O/GloHD/ClaraHD: 44px --> 22px
      - Find:    "MediumVertSpacer[qApp_deviceIsDragon=true] {\n  min-height: 44px;\n  max-height: 44px;\n}"
        Replace: "MediumVertSpacer[qApp_deviceIsDragon=true] {\n  min-height: 22px;\n  max-height: 22px;\n}"
      # AuraOne/Forma: 56px --> 28px
      - Find:    "MediumVertSpacer[qApp_deviceIsDaylight=true] {\n  min-height: 56px;\n  max-height: 56px;\n}"
        Replace: "MediumVertSpacer[qApp_deviceIsDaylight=true] {\n  min-height: 28px;\n  max-height: 28px;\n}"
      # LibraH2O: 50px --> 25px
      - Find:    "MediumVertSpacer[qApp_deviceIsStorm=true] {\n  min-height: 50px;\n  max-height: 50px;\n}"
        Replace: "MediumVertSpacer[qApp_deviceIsStorm=true] {\n  min-height: 25px;\n  max-height: 25px;\n}"

Custom synopsis details line spacing:
  - Enabled: no
  - Description: Sets the line spacing for Book details synopsis.
  - FindZlib: "body[qApp_deviceIsTrilogy=true] {\n  line-height: 1.45em;"
  - ReplaceZlibGroup:
      Replacements:
        # Touch/Mini (Trilogy)
      - {Find: "line-height: 1.45em;", Replace: "line-height: 1.3em;"}
        # Glo/Aura/Aura2E (Phoenix)
      - {Find: "line-height: 1.4em;",  Replace: "line-height: 1.3em;"}
        # AuraHD/H2O/GloHD/ClaraHD (Dragon) and
        # AuraOne (Daylight) and LibraH2O (Storm)
      - {Find: "line-height: 1.35em;", Replace: "line-height: 1.3em;"}

Custom synopsis font size:
  - Enabled: no
  - Description: Increase synopsis font size
  - FindZlib: "body[qApp_deviceIsTrilogy=true] {\n  font-size: 19px;"
  - ReplaceZlibGroup:
      Replacements:
      - {Find: "font-size: 19px;", Replace: "font-size: 20px;"} # Touch/Mini (Trilogy)
      - {Find: "font-size: 23px;", Replace: "font-size: 25px;"} # Glo/Aura/Aura2E (Phoenix)
      - {Find: "font-size: 29px;", Replace: "font-size: 32px;"} # AuraHD/H2O (Dragon)
      - {Find: "font-size: 32px;", Replace: "font-size: 35px;"} # GloHD/ClaraHD (Alyssum, Nova)
      - {Find: "font-size: 34px;", Replace: "font-size: 37px;"} # LibraH2O (Storm)
      - {Find: "font-size: 37px;", Replace: "font-size: 40px;"} # AuraONE/Forma (Daylight)

Increase home screen cover size:
  - Enabled: no
  - PatchGroup: Home screen layout tweaks
  - Description: Reduces the home screen margins, allowing larger cover images.
  - FindZlib: "#row1col2"
  - ReplaceZlibGroup:
      Replacements:
        # Touch/Mini (Trilogy)
      - {Find: "qproperty-leftMargin: 26;",  Replace: "qproperty-leftMargin: 10;"}
      - {Find: "qproperty-rightMargin: 26;", Replace: "qproperty-rightMargin: 10;"}
        # Glo/Aura/Aura2E (Phoenix)
      - {Find: "qproperty-leftMargin: 36;",  Replace: "qproperty-leftMargin: 12;"}
      - {Find: "qproperty-rightMargin: 36;", Replace: "qproperty-rightMargin: 12;"}
        # AuraHD/H2O/GloHD/ClaraHD (Dragon)
      - {Find: "qproperty-leftMargin: 50;",  Replace: "qproperty-leftMargin: 16;"}
      - {Find: "qproperty-rightMargin: 50;", Replace: "qproperty-rightMargin: 16;"}
        # AuraOne/Forma (Daylight)
      - {Find: "qproperty-leftMargin: 65;",  Replace: "qproperty-leftMargin: 20;"}
      - {Find: "qproperty-rightMargin: 65;", Replace: "qproperty-rightMargin: 20;"}
        # LibraH2O (Storm)
      - {Find: "qproperty-leftMargin: 56;",  Replace: "qproperty-leftMargin: 18;"}
      - {Find: "qproperty-rightMargin: 56;", Replace: "qproperty-rightMargin: 18;"}

# The following patch(es) are ported from jackie_w's patches

Dictionary pop-up - increase available text area:
  - Enabled: no
  - Description: |
      Increase the area available for dictionary definitions in the dictionary pop-up
      by reducing some of the excess whitespace used (header, footer, margins).
      This patch was formerly known as 'Dictionary pop-up frame size increase', but in
      fw 4.10.11591, Kobo removed access to the code which specifies pop-up frame size.
      fw 4.12.12111, Kobo removed access to the code which could reduce footer size.
      fw 4.20.14601  Kobo added new DictionaryViewFooter CSS stream to control footer height again.
  # Part 1
  - FindZlib: "#InlineDictionaryView"
  - ReplaceZlibGroup:
      Replacements:
        # Part 1a: #dictionary - reduce top/left margins
          # Touch/Mini
        - Find:    "#dictionary[qApp_deviceIsTrilogy=true] {\n  margin-top: 20px;\n  margin-left: 10px;\n}"
          Replace: "#dictionary[qApp_deviceIsTrilogy=true] {\n  margin-top: 5px;\n  margin-left: 0px;\n}"
          # Glo/Aura/Aura2 
        - Find:    "#dictionary[qApp_deviceIsPhoenix=true] {\n  margin-top: 20px;\n  margin-left: 20px;\n}"
          Replace: "#dictionary[qApp_deviceIsPhoenix=true] {\n  margin-top: 7px;\n  margin-left: 0px;\n}"
          # AuraHD/H2O/H2O2/GloHD/ClaraHD
        - Find:    "#dictionary[qApp_deviceIsDragon=true] {\n  margin-top: 30px;\n  margin-left: 30px;\n}"
          Replace: "#dictionary[qApp_deviceIsDragon=true] {\n  margin-top: 10px;\n  margin-left: 0px;\n}"
          # AuraOne/Forma  
        - Find:    "#dictionary[qApp_deviceIsDaylight=true] {\n  margin-top: 42px;\n  margin-left: 42px;\n}"
          Replace: "#dictionary[qApp_deviceIsDaylight=true] {\n  margin-top: 14px;\n  margin-left: 0px;\n}"
        #
        # Part 1b: #header - reduce header height
          # Touch/Mini
        - Find:    "#header[qApp_deviceIsTrilogy=true] {\n  max-height: 46px;\n  min-height: 46px;\n}"
          Replace: "#header[qApp_deviceIsTrilogy=true] {\n  max-height: 46px;\n  min-height: 46px;\n}"
          # Glo/Aura/Aura2  
        - Find:    "#header[qApp_deviceIsPhoenix=true] {\n  max-height: 60px;\n  min-height: 60px;\n}"
          Replace: "#header[qApp_deviceIsPhoenix=true] {\n  max-height: 50px;\n  min-height: 50px;\n}"
          # AuraHD/H2O/H2O2/GloHD/ClaraHD/LibraH2O
        - Find:    "#header[qApp_deviceIsDragon=true] {\n  max-height: 90px;\n  min-height: 90px;\n}"
          Replace: "#header[qApp_deviceIsDragon=true] {\n  max-height: 70px;\n  min-height: 70px;\n}"
          # AuraOne/Forma  
        - Find:    "#header[qApp_deviceIsDaylight=true] {\n  max-height: 120px;\n  min-height: 120px;\n}"
          Replace: "#header[qApp_deviceIsDaylight=true] {\n  max-height: 90px;\n  min-height: 90px;\n}"
        #
        # Part 1c: #mainContainer - reduce left/right margins
          # Touch/Mini
        - Find:    "#mainContainer[qApp_deviceIsTrilogy=true] {\n  qproperty-leftMargin: 12px;\n  qproperty-rightMargin: 12px;\n}"
          Replace: "#mainContainer[qApp_deviceIsTrilogy=true] {\n  qproperty-leftMargin: 6px;\n  qproperty-rightMargin: 6px;\n}"
          # Glo/Aura/Aura2  
        - Find:    "#mainContainer[qApp_deviceIsPhoenix=true] {\n  qproperty-leftMargin: 16px;\n  qproperty-rightMargin: 16px;\n}"
          Replace: "#mainContainer[qApp_deviceIsPhoenix=true] {\n  qproperty-leftMargin: 8px;\n  qproperty-rightMargin: 8px;\n}"
          # AuraHD/H2O/H2O2/GloHD/ClaraHD
        - Find:    "#mainContainer[qApp_deviceIsDragon=true] {\n  qproperty-leftMargin: 22px;\n  qproperty-rightMargin: 22px;\n}"
          Replace: "#mainContainer[qApp_deviceIsDragon=true] {\n  qproperty-leftMargin: 11px;\n  qproperty-rightMargin: 11px;\n}"
          # AuraOne/Forma  
        - Find:    "#mainContainer[qApp_deviceIsDaylight=true] {\n  qproperty-leftMargin: 28px;\n  qproperty-rightMargin: 28px;\n}"
          Replace: "#mainContainer[qApp_deviceIsDaylight=true] {\n  qproperty-leftMargin: 14px;\n  qproperty-rightMargin: 14px;\n}"
          # LibraH2O  
        - Find:    "#mainContainer[qApp_deviceIsStorm=true] {\n  qproperty-leftMargin: 25px;\n  qproperty-rightMargin: 25px;\n}"
          Replace: "#mainContainer[qApp_deviceIsStorm=true] {\n  qproperty-leftMargin: 12px;\n  qproperty-rightMargin: 12px;\n}"
  #
  # Part 2: DictionaryViewFooter - Reduce vertical height of footer
    # Touch/Mini
  - FindReplaceString:
      Find:    "DictionaryViewFooter[qApp_deviceIsTrilogy=true] {\n  max-height: 46px;\n  min-height: 46px;\n}"
      Replace: "DictionaryViewFooter[qApp_deviceIsTrilogy=true] {\n  max-height: 40px;\n  min-height: 40px;\n}"
      MustMatchLength: yes
    # Glo/Aura/Aura2 
  - FindReplaceString:
      Find:    "DictionaryViewFooter[qApp_deviceIsPhoenix=true] {\n  max-height: 60px;\n  min-height: 60px;\n}"
      Replace: "DictionaryViewFooter[qApp_deviceIsPhoenix=true] {\n  max-height: 50px;\n  min-height: 50px;\n}"
      MustMatchLength: yes
    # AuraHD/H2O/H2O2/GloHD/ClaraHD/LibraH2O
  - FindReplaceString:
      Find:    "DictionaryViewFooter[qApp_deviceIsDragon=true] {\n  max-height: 90px;\n  min-height: 90px;\n}"
      Replace: "DictionaryViewFooter[qApp_deviceIsDragon=true] {\n  max-height: 60px;\n  min-height: 60px;\n}"
      MustMatchLength: yes
    # AuraOne/Forma
  - FindReplaceString:
      Find:    "DictionaryViewFooter[qApp_deviceIsDaylight=true] {\n  max-height: 120px;\n  min-height: 120px;\n}"
      Replace: "DictionaryViewFooter[qApp_deviceIsDaylight=true] {\n  max-height:  80px;\n  min-height:  80px;\n}"
      MustMatchLength: yes

Increase Book Details synopsis area:
  - Enabled: no
  - Description: |
      Book details page
      - Increase height of bottom half (Synopsis) by 
        decreasing height of top half (Cover, Title, Author, Series)
      - See https://www.mobileread.com/forums/showpost.php?p=3311354&postcount=134
      - fw 4.12/4.16 - rewritten by jackie_w to replace oren64's patch
  - FindZlib: "#bookInfoWidget"
  - ReplaceZlibGroup:
      Replacements:
        #   Portrait mode:  #bookInfoWidget[isLandscape=false]: 
        - {Find: "height: 300px;", Replace: "height: 200px;"} #Touch/Mini
        - {Find: "height: 390px;", Replace: "height: 230px;"} #Glo/Aura/Aura2
        - {Find: "height: 550px;", Replace: "height: 370px;"} #AuraHD/H2O/H2O2/GloHD/ClaraHD
        - {Find: "height: 642px;", Replace: "height: 425px;"} #LibraH2O (*untested)
        - {Find: "height: 715px;", Replace: "height: 500px;"} #AuraOne/Forma
        #   Landscape mode:  #bookInfoWidget[isLandscape=true]: 
        - {Find: "height: 210px;", Replace: "height: 200px;"} #Touch/Mini
        - {Find: "height: 265px;", Replace: "height: 230px;"} #Glo/Aura/Aura2
        - {Find: "height: 420px;", Replace: "height: 370px;"} #AuraHD/H2O/H2O2/GloHD/ClaraHD
        - {Find: "height: 490px;", Replace: "height: 425px;"} #LibraH2O (*untested)
        - {Find: "height: 540px;", Replace: "height: 500px;"} #AuraOne/Forma

Increase library cover size:
  - Enabled: no
  - Description: |
      Increase the cover thumbnail size in My Books main book list
      See screenshots - https://www.mobileread.com/forums/showpost.php?p=3241532&postcount=82
      fw 4.17 - rewritten by jackie_w to replace oren64's patch
  - FindZlib: "#coverPixmapView"
  - ReplaceZlibGroup:
      Replacements:
        # coverPixmapView increase cover thumbnail width/height:
        # Touch/Mini (Trilogy)
        - {Find: "width: 60px;",   Replace: "width: 85px;"}
        - {Find: "height: 90px;",  Replace: "height: 100px;"}
        # Glo/Aura/Aura2 (Phoenix)
        - {Find: "width: 70px;",   Replace: "width: 100px;"}
        - {Find: "height: 110px;", Replace: "height: 130px;"}
        # AuraHD/H2O/H2O2/GloHD/ClaraHD (Dragon)
        - {Find: "width: 108px;",  Replace: "width: 140px;"}
        - {Find: "height: 168px;", Replace: "height: 190px;"}
        # AuraOne/Forma (Daylight)
        - {Find: "width: 140px;",  Replace: "width: 190px;"}
        - {Find: "height: 218px;", Replace: "height: 255px;"}
        # LibraH2O (Storm)
        - {Find: "width: 126px;",  Replace: "width: 165px;"}
        - {Find: "height: 196px;", Replace: "height: 225px;"}

Custom collection/author header title font:
  - Enabled: no
  - Description: |
      Change font appearance in Collection and Author list header
      See https://www.mobileread.com/forums/showpost.php?p=3520879&postcount=42
      fw 4.17.13694 rewritten by jackie_w to replace 
      oren64's patch "Custom font to collection and author titles"
  # First set:
  - FindZlib: "#header,\n#backButton,\n#moreLink {"
  - ReplaceZlibGroup:
      Replacements:
        # #header #headerTitle Change font-family, case, font-size
        #
        # Un-comment next line to un-force UPPERCASE
        #- {Find: "text-transform: uppercase", Replace: "text-transform: none;"}
        #
        # Change font-family. 
        # Note: If new font-family name contains spaces wrap in 'single quotes'
        #       e.g. 'Kobo Nickel'
        # Un-comment & edit next line to change font-family
        #- {Find: "font-family: Avenir;", Replace: "font-family: 'Kobo Nickel';"}
        #
        # Increase font-size.
          # Touch/Mini (Trilogy)
        - {Find: "font-size: 16px;", Replace: "font-size: 28px;"}
          # Glo/Aura/Aura2 (Phoenix)
        - {Find: "font-size: 20px;", Replace: "font-size: 36px;"}
          # AuraHD/H2O/H2O2/GloHD/ClaraHD (Dragon)
        - {Find: "font-size: 28px;", Replace: "font-size: 42px;"}
          # LibraH2O (Storm)
        - {Find: "font-size: 32px;", Replace: "font-size: 46px;"}
          # AuraOne/Forma (Daylight)
        - {Find: "font-size: 36px;", Replace: "font-size: 50px;"}

Reduce new header/footer height:
  - Enabled: no
  - Description: |
        Reduce new reading header/footer heights when they are enabled.
        Affects both ePubs and KePubs.
        This patch may be of interest to those who used to enable the old
        "Custom menubar - reduce height by 33%"
  - FindZlib: "ReadingFooter"
  - ReplaceZlibGroup:
      # Adjust the Replace values of min-height/max-height as you wish.
      # Keep min-height=max-height
      Replacements:
        # ReadingFooter Reduce min/max height by 33%
        # Touch/Mini (Trilogy)
      - Find:    "ReadingFooter[qApp_deviceIsTrilogy=true] {\n  min-height: 56;\n  max-height: 56px;\n}"
        Replace: "ReadingFooter[qApp_deviceIsTrilogy=true] {\n  min-height: 37px;\n  max-height: 37px;\n}"
        # Glo/Aura/Aura2E (Phoenix)
      - Find:    "ReadingFooter[qApp_deviceIsPhoenix=true] {\n  min-height: 71px;\n  max-height: 71px;\n}"
        Replace: "ReadingFooter[qApp_deviceIsPhoenix=true] {\n  min-height: 47px;\n  max-height: 47px;\n}"
        # AuraHD/H2O/GloHD/ClaraHD (Dragon)
      - Find:    "ReadingFooter[qApp_deviceIsDragon=true] {\n  min-height: 101px;\n  max-height: 101px;\n}"
        Replace: "ReadingFooter[qApp_deviceIsDragon=true] {\n  min-height: 66px;\n  max-height: 66px;\n}"
        # AuraOne/Forma (Daylight)
      - Find:    "ReadingFooter[qApp_deviceIsDaylight=true] {\n  min-height: 131px;\n  max-height: 131px;\n}"
        Replace: "ReadingFooter[qApp_deviceIsDaylight=true] {\n  min-height: 86px;\n  max-height: 86px;\n}"
        # LibraH2O (Storm)
      - Find:    "ReadingFooter[qApp_deviceIsStorm=true] {\n  min-height: 118px;\n  max-height: 118px;\n}"
        Replace: "ReadingFooter[qApp_deviceIsStorm=true] {\n  min-height: 78px;\n  max-height: 78px;\n}"

Custom new header/footer font:
  - Enabled: no
  - Description: |
        This patch allows you to change font-family and/or font-size in the 
        new header/footer. They will automatically be a matched pair. Full details & screenshots at 
        https://www.mobileread.com/forums/showpost.php?p=3897175&postcount=4
        N.B: This patch is not suitable for Japanese/Chinese locale users

  - FindZlib: "ReadingFooter"
  - ReplaceZlibGroup:
      Replacements:
        # Part 1. Customise font-family (built-in or sideloaded font)
        #         Please see notes at
        #         https://www.mobileread.com/forums/showpost.php?p=3896190&postcount=2
        #         for general considerations whenever you change font-family in the Kobo GUI
        
        # #caption[newHeader=true] and #caption[newFooter=true]
        # N.B: If new font-family contains spaces wrap in 'single quotes', e.g. 'Kobo Nickel'
        
        # Un-comment and edit replacement font-family to change header/footer font
        #- {Find: "font-family: Avenir;", Replace: "font-family:Avenir;"}


        # Part 2. 
        #   2a. Customise font-size for header/footer
        #   2b. (optional) Fine-tune footer text position to avoid cutting bottom progressbar
        #       (optional) Fine-tune header text position to avoid possible shadow from top bezel
        #       May be useful to those who have also enabled patch 'Reduce new header/footer height'
        #       and have customised it to aggressively reduce header/footer height.
        
        # 2a. Change font-size for models other than Touch/Mini (header & footer simultaneously)
        # #caption[newHeader=true] & #caption[newFooter=true]
          # Glo/Aura/Aura2E (Phoenix)
        - Find:    "[qApp_deviceIsPhoenix=true] {\n  font-size: 16px;\n}"
          Replace: "[qApp_deviceIsPhoenix=true] {\n  font-size: 16px;\n}"
          # AuraHD/H2O (Dragon)
        - Find:    "[qApp_deviceIsDragon=true] {\n  font-size: 21px;\n}"
          Replace: "[qApp_deviceIsDragon=true] {\n  font-size: 21px;\n}"
          # GloHD (Alyssum)
        - Find:    "[qApp_deviceIsAlyssum=true] {\n  font-size: 23px;\n}"
          Replace: "[qApp_deviceIsAlyssum=true] {\n  font-size: 23px;\n}"
          # ClaraHD (Nova)
        - Find:    "[qApp_deviceIsNova=true] {\n  font-size: 23px;\n}"
          Replace: "[qApp_deviceIsNova=true] {\n  font-size: 23px;\n}"
          # LibraH2O (Storm)
        - Find:    "[qApp_deviceIsStorm=true] {\n  font-size: 25px;\n}"
          Replace: "[qApp_deviceIsStorm=true] {\n  font-size: 25px;\n}"
          # AuraOne/Forma (Daylight)
        - Find:    "[qApp_deviceIsDaylight=true] {\n  font-size: 27px;\n}"
          Replace: "[qApp_deviceIsDaylight=true] {\n  font-size: 27px;\n}"
          
        # N.B: If you do not have a Touch/Mini and your header/footer 
        #      positions are exactly as you like them you do not need the
        #      next 3 Find/Replace pairs.
        #      Leave them as-is or comment them out entirely and forget about them.

        # Don't change the following pair. It exists to split the header/footer styles
        # which were merged in 4.19.14123.
        - Find:    "#caption[newHeader=true][qApp_deviceIsTrilogy=true],\n#caption[newFooter=true][qApp_deviceIsTrilogy=true] {\n  font-size: 13px;\n}"
          Replace: "#caption[newHeader=true][qApp_deviceIsTrilogy=true] {\n  font-size: 13px;\n}\n#caption[newFooter=true][qApp_deviceIsTrilogy=true] {\n  font-size: 13px;\n}"

        # 2a. Touch/Mini users only: Adjust footer font-size as required.
        # 2b. All models (optional): Fine-tune footer position by adjusting margin-top value
        #     A negative margin-top (e.g -10px) moves the footer text slightly upwards
        #     further from the bottom bezel/progressbar, closer to the page content
        - Find:    "#caption[newFooter=true][qApp_deviceIsTrilogy=true] {\n  font-size: 13px;\n}"
          Replace: "#caption[newFooter=true] {\n  font-size: 13px; margin-top: 0px;}"
        
        # 2a. Touch/Mini users only: Adjust header font-size as required.
        # 2b. All models (optional): Fine-tune header position by adjusting margin-bottom value.
        #     A negative margin-bottom (e.g -10px) moves the header text slightly downwards
        #     further from the top bezel, closer to the page content
        - Find:    "#caption[newHeader=true][qApp_deviceIsTrilogy=true] {\n  font-size: 13px;\n}"
          Replace: "#caption[newHeader=true] {\n  font-size: 13px; margin-bottom: 0px;}"

        # Don't change anything below. It exists to free up some space for
        # your changes above by removing Japanese/Chinese-specific CSS code blocks
        # so that kobopatch will run without giving some kind of 'too long' error message.
        - {Find: "#caption[newHeader=true][localeName=\"ja\"],\n#caption[newFooter=true][localeName=\"ja\"] {\n  font-family: Sans-SerifJP, sans-serif;\n  font-style: normal;\n}\n", Replace: "\n"}
        - {Find: "#caption[newHeader=true][localeName=\"zh\"],\n#caption[newFooter=true][localeName=\"zh\"] {\n  font-family: Sans-SerifZH-Simplified, sans-serif;\n  font-style: normal;\n}\n", Replace: "\n"}
        - {Find: "#caption[newHeader=true][localeName=\"zh-HK\"],\n#caption[newFooter=true][localeName=\"zh-HK\"] {\n  font-family: Sans-SerifZH-Traditional, sans-serif;\n  font-style: normal;\n}\n", Replace: "\n"}
        - {Find: "#caption[newHeader=true][localeName=\"zh-TW\"],\n#caption[newFooter=true][localeName=\"zh-TW\"] {\n  font-family: Sans-SerifZH-Traditional, sans-serif;\n  font-style: normal;\n}\n", Replace: "\n"}

Custom page navigation scrubber:
  - Enabled: no
  - Description: |
        This patch allows you to customise various parts of the new 'scrubber'. Full details & screenshots at:
        https://www.mobileread.com/forums/showpost.php?p=3897174&postcount=3
        N.B: This patch is not suitable for Japanese/Chinese locale users

  - FindZlib: "#scrubberContainer"
  - ReplaceZlibGroup:
      Replacements:
        # Part 1. Customise all 3 of these buttons
        #    - Left & Right 'Back to page nnn' (#revertLeft, #revertRight)
        #    - Current chapter name (#chapter)
        
        # 1a. Customise font-size for desired model(s):
          # Touch/Mini (Trilogy)
        - Find:    "[qApp_deviceIsTrilogy=true] {\n  font-size: 19px;"
          Replace: "[qApp_deviceIsTrilogy=true] {\n  font-size: 19px;"
          # Glo/Aura/Aura2E (Phoenix)
        - Find:    "[qApp_deviceIsPhoenix=true] {\n  font-size: 23px;"
          Replace: "[qApp_deviceIsPhoenix=true] {\n  font-size: 23px;"
          # AuraHD/H2O (Dragon)
        - Find:    "[qApp_deviceIsDragon=true] {\n  font-size: 29px;"
          Replace: "[qApp_deviceIsDragon=true] {\n  font-size: 29px;"
          # GloHD (Alyssum)
        - Find:    "[qApp_deviceIsAlyssum=true] {\n  font-size: 32px;"
          Replace: "[qApp_deviceIsAlyssum=true] {\n  font-size: 32px;"
          # ClaraHD (Nova)
        - Find:    "[qApp_deviceIsNova=true] {\n  font-size: 32px;"
          Replace: "[qApp_deviceIsNova=true] {\n  font-size: 32px;"
          # LibraH2O (Storm)
        - Find:    "[qApp_deviceIsStorm=true] {\n  font-size: 34px;"
          Replace: "[qApp_deviceIsStorm=true] {\n  font-size: 34px;"
          # AuraOne/Forma (Daylight)
        - Find:    "[qApp_deviceIsDaylight=true] {\n  font-size: 37px;"
          Replace: "[qApp_deviceIsDaylight=true] {\n  font-size: 37px;"

        # 1b. Customise other font properties of these 3 buttons (all models):
        #     - font-family (built-in or sideloaded font)
        #         NB: If new font-family name contains spaces, wrap in 'single quotes',
        #             e.g. font-family:'Kobo Nickel';
        #     - font-weight (bold or normal)
        #     - font-style  (italic or normal)
        - Find:    "{\n  font-family: Avenir;\n  font-weight: bold;\n  font-style: normal;\n}"
          Replace: "{font-family:Avenir; font-weight:bold; font-style:normal;}"
        # Users with CSS knowledge can add extra style properties as desired,
        # e.g. to make them look more like buttons and less like labels, 
        #      use this Replace instead. If it can be done with CSS you can do it here.
          #Replace: "{font-family:Avenir; font-weight:normal; font-style:normal; background-color:#ddd;}"


        # Part 2. Customise the central 'Page x of y' label (#page)
        #         Provided for those who want to create a uniform look & feel
        # 2a. Customise font-size for desired model(s):
          # Touch/Mini (Trilogy)
        - Find:    "#page[qApp_deviceIsTrilogy=true] {\n  font-size: 17px;"
          Replace: "#page[qApp_deviceIsTrilogy=true] {\n  font-size: 17px;"
          # Glo/Aura/Aura2E (Phoenix)
        - Find:    "#page[qApp_deviceIsPhoenix=true] {\n  font-size: 22px;"
          Replace: "#page[qApp_deviceIsPhoenix=true] {\n  font-size: 22px;"
          # AuraHD/H2O (Dragon)
        - Find:    "#page[qApp_deviceIsDragon=true] {\n  font-size: 26px;"
          Replace: "#page[qApp_deviceIsDragon=true] {\n  font-size: 26px;"
          # GloHD (Alyssum)
        - Find:    "#page[qApp_deviceIsAlyssum=true] {\n  font-size: 30px;"
          Replace: "#page[qApp_deviceIsAlyssum=true] {\n  font-size: 30px;"
          # ClaraHD (Nova)
        - Find:    "#page[qApp_deviceIsNova=true] {\n  font-size: 30px;"
          Replace: "#page[qApp_deviceIsNova=true] {\n  font-size: 30px;"
          # LibraH2O (Storm)
        - Find:    "#page[qApp_deviceIsStorm=true] {\n  font-size: 30px;"
          Replace: "#page[qApp_deviceIsStorm=true] {\n  font-size: 30px;"
          # AuraOne/Forma (Daylight)
        - Find:    "#page[qApp_deviceIsDaylight=true] {\n  font-size: 34px;"
          Replace: "#page[qApp_deviceIsDaylight=true] {\n  font-size: 34px;"

        # 2b. Customise other font properties of 'Page x of y' label (all models)
        #     e.g. text-transform (uppercase or none)
        #          font-family, font-weight, font-style, etc.
        # Un-comment next 2 lines and change Replace CSS as desired
        #- Find:    "#page {\n  padding-left: 0px;\n}"
        #  Replace: "#page {padding-left: 0px; font-family:Georgia; text-transform:none;}"

Customise Header back button:
  - Enabled: no
  - Description: |
        Customise in-book button (top left corner) for 'Back to Home', 'Back to My Books' etc
  - FindZlib: "#ReadingMenuView"
  - ReplaceZlibGroup:
      Replacements:
        # 'Back to Home' button un-bolded
        - Find:    "#backLabel #label {\n  font-family: Avenir;\n  font-style: normal;\n  font-weight: bold;"
          Replace: "#backLabel #label {\n  font-family:Avenir;\n  font-style:normal;\n  font-weight:normal;"

Series list increase cover thumbnails:
  - Enabled: no
  - Description: |
        Series list view (not cover view). Enlarge cover thumbnails.
        NB: After enabling this patch, if you find that the 
            last Series thumbnail on each page is truncated along its bottom edge
            then you should also enable the additional nickel patch:
            'Reduce height of page navigator arrows'
  - FindZlib: "#seriesCoverPack"
  - ReplaceZlibGroup:
      Replacements:
        # Part 1: #seriesWidgetContainer - Reduce top/bottom margins
        #   NB: The smaller the topMargin the closer the Series name
        #       will be to the horizontal gridline above it
          # Touch/Mini
        - {Find: "topMargin: 9px;",     Replace: "topMargin: 3px;"}
        - {Find: "bottomMargin: 9px;",  Replace: "bottomMargin: 0px;"}
          # Glo/Aura6"/Aurav2
        - {Find: "topMargin: 12px;",    Replace: "topMargin: 4px;"}
        - {Find: "bottomMargin: 12px;", Replace: "bottomMargin: 0px;"}
          # AuraHD/H2O/H2Ov2/GloHD/ClaraHD
        - {Find: "topMargin: 14px;",    Replace: "topMargin: 5px;"}
        - {Find: "bottomMargin: 14px;", Replace: "bottomMargin: 0px;"}
          # AuraOne/Forma
        - {Find: "topMargin: 21px;",    Replace: "topMargin: 7px;"}
        - {Find: "bottomMargin: 21px;", Replace: "bottomMargin: 0px;"}
          # LibraH2O
        - {Find: "topMargin: 17px;",    Replace: "topMargin: 6px;"}
        - {Find: "bottomMargin: 17px;", Replace: "bottomMargin: 0px;"}
        #
        # Part 2: #seriesCoverPack - Increase cover thumbnail size
          # Touch/Mini
        - {Find: "width: 60px;",   Replace: "width: 85px;"}
        - {Find: "height: 94px;",  Replace: "height: 105px;"}
          # Glo/Aura6"/Aurav2
        - {Find: "width: 70px;",   Replace: "width: 100px;"}
        - {Find: "height: 115px;", Replace: "height: 140px;"}
          # AuraHD/H2O/H2Ov2/GloHD/ClaraHD
        - {Find: "width: 108px;",  Replace: "width: 141px;"}
        - {Find: "height: 175px;", Replace: "height: 200px;"}
          # AuraOne/Forma
        - {Find: "width: 140px;",  Replace: "width: 190px;"}
        - {Find: "height: 222px;", Replace: "height: 265px;"}
          # LibraH2O
        - {Find: "width: 126px;",  Replace: "width: 165px;"}
        - {Find: "height: 205px;", Replace: "height: 234px;"}
        #
        # Part 3: All models: #hBooks - Move bookcount up & away from horizontal gridline
        #         Users of lower-res models (Touch/Mini/Glo/Aura6"/Aurav2) may prefer to 
        #         decrease the Replace value of 20px for padding-bottom
        - Find:    "#hBooks {\n  padding-left: 0px;\n  padding-bottom: 0px;\n  font-style: normal;\n}"
          Replace: "#hBooks {\n  padding-left: 0px;\n  padding-bottom:20px;\n  font-style: normal;\n}"

Reduce height of page navigator arrows:
  - Enabled: no
  - Description: |
        Reduce page navigator footer height (Book list, Series list)
        This patch may be helpful to users who also enable the nickel patch
        'Series list increase cover thumbnails'
        It should prevent the white background of the page footer/navigation arrow 
        overlapping the bottom edge of the last Series list thumbnail on each page.
  - FindZlib: "QWidget[footerFixedHeight=true][qApp_deviceIsTrilogy=true]"
  - ReplaceZlibGroup:
      Replacements:
          # Touch/Mini
        - Find:    "QWidget[footerFixedHeight=true][qApp_deviceIsTrilogy=true] {\n  min-height: 70px;\n  max-height: 70px;\n}"
          Replace: "QWidget[footerFixedHeight=true][qApp_deviceIsTrilogy=true] {\n  min-height: 54px;\n  max-height: 54px;\n}"
          # Glo/Aura6"/Aurav2
        - Find:    "QWidget[footerFixedHeight=true][qApp_deviceIsPhoenix=true] {\n  min-height: 82px;\n  max-height: 82px;\n}"
          Replace: "QWidget[footerFixedHeight=true][qApp_deviceIsPhoenix=true] {\n  min-height: 70px;\n  max-height: 70px;\n}"
          # AuraHD/H20/H20v2/GloHD/ClaraHD
        - Find:    "QWidget[footerFixedHeight=true][qApp_deviceIsDragon=true] {\n  min-height: 120px;\n  max-height: 120px;\n}"
          Replace: "QWidget[footerFixedHeight=true][qApp_deviceIsDragon=true] {\n  min-height: 90px;\n  max-height: 90px;\n}"
          # AuraOne/Forma
        - Find:    "QWidget[footerFixedHeight=true][qApp_deviceIsDaylight=true] {\n  min-height: 156px;\n  max-height: 156px;\n}"
          Replace: "QWidget[footerFixedHeight=true][qApp_deviceIsDaylight=true] {\n  min-height: 120px;\n  max-height: 120px;\n}"
          # LibraH2O
        - Find:    "QWidget[footerFixedHeight=true][qApp_deviceIsStorm=true] {\n  min-height: 138px;\n  max-height: 138px;\n}"
          Replace: "QWidget[footerFixedHeight=true][qApp_deviceIsStorm=true] {\n  min-height: 105px;\n  max-height: 105px;\n}"

# The following patch(es) are ported from oren64's patches

Increase headlines font:
  - Enabled: no
  - Description: |
      Increase the font-size of the tab header labels in My Books, Activity, Bookstore...
      See https://www.mobileread.com/forums/showpost.php?p=3931942&postcount=183
  - FindZlib: "#tabContainer > N3TabItem"
  - ReplaceZlib:
      Find:    "#tabContainer > N3TabItem[qApp_deviceIsTrilogy=true] {\n  font-size: 16px;\n}"
      Replace: "#tabContainer > N3TabItem[qApp_deviceIsTrilogy=true] {\n  font-size: 28px;\n}"
  - ReplaceZlib:
      Find:    "#tabContainer > N3TabItem[qApp_deviceIsPhoenix=true] {\n  font-size: 20px;\n}"
      Replace: "#tabContainer > N3TabItem[qApp_deviceIsPhoenix=true] {\n  font-size: 36px;\n}"
  - ReplaceZlib:
      Find:    "#tabContainer > N3TabItem[qApp_deviceIsDragon=true] {\n  font-size: 28px;\n}"
      Replace: "#tabContainer > N3TabItem[qApp_deviceIsDragon=true] {\n  font-size: 42px;\n}"
  - ReplaceZlib:
      Find:    "#tabContainer > N3TabItem[qApp_deviceIsStorm=true] {\n  font-size: 32px;\n}"
      Replace: "#tabContainer > N3TabItem[qApp_deviceIsStorm=true] {\n  font-size: 46px;\n}"
  - ReplaceZlib:
      Find:    "#tabContainer > N3TabItem[qApp_deviceIsDaylight=true] {\n  font-size: 36px;\n}"
      Replace: "#tabContainer > N3TabItem[qApp_deviceIsDaylight=true] {\n  font-size: 50px;\n}"

New home screen subtitle custom font:
  - Enabled: no
  - Description: |
      Increase subtitle font size, font color black. Works best when used
      with with patch `New home screen increasing cover size`
  - BaseAddress: 0x1485467 # FindZlib: "MetaDataLabel {\n  color: #666666;\n  qproperty-indent: 0;\n}"
  - ReplaceZlib: {Find: "MetaDataLabel {\n  color: #666666;\n  qproperty-indent: 0;\n}", Replace: "MetaDataLabel {\n  color: #000000;\n  qproperty-indent: 0;\n}"}
  - ReplaceZlib:
      Find:    "MetaDataLabel[qApp_deviceIsTrilogy=true] {\n  font-size: 13px;\n}"
      Replace: "MetaDataLabel[qApp_deviceIsTrilogy=true] {\n  font-size: 14px;\n}"
  - ReplaceZlib:
      Find:    "MetaDataLabel[qApp_deviceIsPhoenix=true] {\n  font-size: 17px;\n}"
      Replace: "MetaDataLabel[qApp_deviceIsPhoenix=true] {\n  font-size: 18px;\n}"
  - ReplaceZlib:
      Find:    "MetaDataLabel[qApp_deviceIsDragon=true] {\n  font-size: 24px;\n}"
      Replace: "MetaDataLabel[qApp_deviceIsDragon=true] {\n  font-size: 26px;\n}"
  - ReplaceZlib:
      Find:    "MetaDataLabel[qApp_deviceIsDaylight=true] {\n  font-size: 31px;\n}"
      Replace: "MetaDataLabel[qApp_deviceIsDaylight=true] {\n  font-size: 34px;\n}"
  # duplicate
  - BaseAddress: 0x148FAF2
  - ReplaceZlib: {Find: "MetaDataLabel {\n  color: #666666;\n  qproperty-indent: 0;\n}", Replace: "MetaDataLabel {\n  color: #000000;\n  qproperty-indent: 0;\n}"}
  - ReplaceZlib:
      Find:    "MetaDataLabel[qApp_deviceIsTrilogy=true] {\n  font-size: 13px;\n}"
      Replace: "MetaDataLabel[qApp_deviceIsTrilogy=true] {\n  font-size: 14px;\n}"
  - ReplaceZlib:
      Find:    "MetaDataLabel[qApp_deviceIsPhoenix=true] {\n  font-size: 17px;\n}"
      Replace: "MetaDataLabel[qApp_deviceIsPhoenix=true] {\n  font-size: 18px;\n}"
  - ReplaceZlib:
      Find:    "MetaDataLabel[qApp_deviceIsDragon=true] {\n  font-size: 24px;\n}"
      Replace: "MetaDataLabel[qApp_deviceIsDragon=true] {\n  font-size: 26px;\n}"
  - ReplaceZlib:
      Find:    "MetaDataLabel[qApp_deviceIsDaylight=true] {\n  font-size: 31px;\n}"
      Replace: "MetaDataLabel[qApp_deviceIsDaylight=true] {\n  font-size: 34px;\n}"

Remove footer (row3) and increase cover size on new home screen:
  - Enabled: no
  - PatchGroup: Home screen layout tweaks
  - FindZlib: "#mainContainer[qApp_deviceIsTrilogy=true] {\n  qproperty-leftMargin: 26;"
  - ReplaceZlibGroup:
      Replacements:
        - Find:    "#mainContainer[qApp_deviceIsTrilogy=true] {\n  qproperty-leftMargin: 26;\n  qproperty-rightMargin: 26;\n  qproperty-topMargin: 96;\n  qproperty-bottomMargin: 26;\n  qproperty-spacing: 10;\n}"
          Replace: "#mainContainer[qApp_deviceIsTrilogy=true] {\n  qproperty-leftMargin: 10;\n  qproperty-rightMargin: 10;\n  qproperty-topMargin: 96;\n  qproperty-bottomMargin: 26;\n  qproperty-spacing: 10;\n}"
        - Find:    "#mainContainer[qApp_deviceIsPhoenix=true] {\n  qproperty-leftMargin: 36;\n  qproperty-rightMargin: 36;\n  qproperty-topMargin: 126;\n  qproperty-bottomMargin: 36;\n  qproperty-spacing: 14;\n}"
          Replace: "#mainContainer[qApp_deviceIsPhoenix=true] {\n  qproperty-leftMargin: 12;\n  qproperty-rightMargin: 12;\n  qproperty-topMargin: 126;\n  qproperty-bottomMargin: 36;\n  qproperty-spacing: 14;\n}"
        - Find:    "#mainContainer[qApp_deviceIsDragon=true] {\n  qproperty-leftMargin: 50;\n  qproperty-rightMargin: 50;\n  qproperty-topMargin: 170;\n  qproperty-bottomMargin: 50;\n  qproperty-spacing: 20;\n}"
          Replace: "#mainContainer[qApp_deviceIsDragon=true] {\n  qproperty-leftMargin: 16;\n  qproperty-rightMargin: 16;\n  qproperty-topMargin: 170;\n  qproperty-bottomMargin: 50;\n  qproperty-spacing: 20;\n}"
        - Find:    "#mainContainer[qApp_deviceIsDaylight=true] {\n  qproperty-leftMargin: 65;\n  qproperty-rightMargin: 65;\n  qproperty-topMargin: 220;\n  qproperty-bottomMargin: 65;\n  qproperty-spacing: 26;\n}"
          Replace: "#mainContainer[qApp_deviceIsDaylight=true] {\n  qproperty-leftMargin: 20;\n  qproperty-rightMargin: 20;\n  qproperty-topMargin: 220;\n  qproperty-bottomMargin: 65;\n  qproperty-spacing: 26;\n}"
        # Note: this shouldn't conflict with the below patch, as the original row1col2 rule is kept intact, and there's no harm in duplicate rules.
        - Find:    "#row1col2 {\n  qproperty-visible: false;\n}"
          Replace: "#row1col2 {\n  qproperty-visible: false;\n}\n#row3 {\n  qproperty-visible: false;\n}"

Remove footer (row3) on new home screen:
  - Enabled: no
  - PatchGroup: Home screen visibility tweaks
  - FindZlib: "#row1col2"
  - ReplaceZlib:
      Find:    "#row1col2 {\n  qproperty-visible: false;\n}"
      Replace: "#row1col2 {\n  qproperty-visible: false;\n}\n#row3 {\n  qproperty-visible: false;\n}"

# The following patch(es) are by pgaskin (geek1011)

Show all games:
  - Enabled: no
  - Description: |
      Shows all games in beta features. Since firmware 4.20.14601, this patch is
      not needed if you have developer mode enabled (search
      devmodeon/devmodeoff).
  - FindZlib: "#boggleContainer[devModeOn=false][qApp_deviceIsPika=true]"
  - ReplaceZlib: {Find: "qproperty-visible: false;", Replace: "qproperty-visible: true;"}

Remove forgot pin button from lock screen:
  - Enabled: no
  - Description: |
      Removes the Forgot PIN -> Sign Out button from the lock screen.
      If this is enabled and you forget your pin, you will need to
      hard reset your Kobo.
  - BaseAddress: 0x1484AE1
  - ReplaceZlib:
      Find: "#lblForgotPin[qApp_deviceIsDragon=true],\n#lblSignOut[qApp_deviceIsDragon=true] {\n  font-size: 26px;\n}"
      Replace: "#lblForgotPin,#lblSignOut{qproperty-visible:false;}"
  - BaseAddress: 0x14939B8
  - ReplaceZlib:
      Find: "#lblForgotPin[qApp_deviceIsDragon=true],\n#lblSignOut[qApp_deviceIsDragon=true] {\n  font-size: 26px;\n}"
      Replace: "#lblForgotPin,#lblSignOut{qproperty-visible:false;}"

Increase size of kepub chapter progress chart:
  - Enabled: no
  - Description: Originally by oren64, rewritten for 4.16.13337 by pgaskin (geek1011).
  - FindZlib: "#chapterSizes"
  - ReplaceZlibGroup:
      Replacements:
      # Top padding is aready set to 15px, 25px, 33px, vertical aligned to middle.
      # Progress chart bar sizes:
      - Find:    "#chapterSizes[qApp_deviceIsTrilogy=true] {\n  max-height: 56px;\n  min-height: 56px;\n}"
        Replace: "#chapterSizes[qApp_deviceIsTrilogy=true] {\n  max-height: 90px;\n  min-height: 90px;\n  min-width: 385px;\n  max-width: 385px;\n}"
      - Find:    "#chapterSizes[qApp_deviceIsPhoenix=true] {\n  max-height: 70px;\n  min-height: 70px;\n}"
        Replace: "#chapterSizes[qApp_deviceIsPhoenix=true] {\n  max-height: 130px;\n  min-height: 130px;\n  min-width: 495px;\n  max-width: 495px;\n}"
      - Find:    "#chapterSizes[qApp_deviceIsDragon=true] {\n  max-height: 100px;\n  min-height: 100px;\n}"
        Replace: "#chapterSizes[qApp_deviceIsDragon=true] {\n  max-height: 170px;\n  min-height: 170px;\n  min-width: 678px;\n  max-width: 678px;\n}"
      - Find:    "#chapterSizes[qApp_deviceIsDaylight=true] {\n  max-height: 130px;\n  min-height: 130px;\n}"
        Replace: "#chapterSizes[qApp_deviceIsDaylight=true] {\n  max-height: 215px;\n  min-height: 215px;\n  min-width: 865px;\n  max-width: 865px;\n}"

